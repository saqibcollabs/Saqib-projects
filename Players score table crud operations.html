<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title> Player Score Table</title>
<style>
    table {
        width: 70%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 18px;
    }
    table, th, td {
        border: 1px solid black;
    }
    th, td {
        padding: 10px;
        text-align: left;
    }
    td[contenteditable="true"] {
        background-color: #f5f5f5;
        outline: none;
    }
    .score {
    background-color: yellow;
}
    button {
        padding: 8px 15px;
        margin: 10px 0;
        cursor: pointer;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
    }
    .delete-btn {
        background: red;
        color: white;
        padding: 6px 10px;
        border-radius: 4px;
        cursor: pointer;
    }
    h2 {
        color: red;
    }
</style>
</head>

<body>

<h2>Players Score Table</h2>

<button onclick="addPlayer()">Add New Player</button>

<table id="scoreTable">
    <tr>
        <th>Player Name</th>
        <th>Day 1 Score</th>
        <th>Day 2 Score</th>
        <th>Total Score</th>
        <th>Action</th>
    </tr>

    <tr>
        <td contenteditable="true">Babar Azam</td>
        <td contenteditable="true" class="score">10</td>
        <td contenteditable="true" class="score">15</td>
        <td class="total"></td>
        <td><button class="delete-btn" onclick="deleteRow(this)">Delete</button></td>
    </tr>

    <tr>
        <td contenteditable="true">Fakhar Zaman</td>
        <td contenteditable="true" class="score">20</td>
        <td contenteditable="true" class="score">30</td>
        <td class="total"></td>
        <td><button class="delete-btn" onclick="deleteRow(this)">Delete</button></td>
    </tr>

    <tr>
        <td contenteditable="true">Saim Ayub</td>
        <td contenteditable="true" class="score">12</td>
        <td contenteditable="true" class="score">18</td>
        <td class="total"></td>
        <td><button class="delete-btn" onclick="deleteRow(this)">Delete</button></td>
    </tr>

</table>

<script>

// READ + UPDATE: Auto update totals 
function updateTotals() {
    const rows = document.querySelectorAll("#scoreTable tr");

    rows.forEach((row, index) => {
        if (index === 0) return; 
        const cells = row.querySelectorAll("td.score");
        const totalCell = row.querySelector("td.total");

        if (cells.length > 0) {
            let day1 = parseFloat(cells[0].innerText) || 0;
            let day2 = parseFloat(cells[1].innerText) || 0;
            totalCell.innerText = day1 + day2;
        }
    });
}

// CREATE: Add a new blank row
function addPlayer() {
    const table = document.getElementById("scoreTable");

    let newRow = `
        <tr>
            <td contenteditable="true">New Player</td>
            <td contenteditable="true" class="score">0</td>
            <td contenteditable="true" class="score">0</td>
            <td class="total">0</td>
            <td><button class="delete-btn" onclick="deleteRow(this)">Delete</button></td>
        </tr>
    `;

    table.insertAdjacentHTML("beforeend", newRow);
    attachUpdateListener();
    updateTotals();
}

// DELETE: Remove row
function deleteRow(button) {
    button.parentElement.parentElement.remove();
    updateTotals();
}

// Attach update listeners to editable fields
function attachUpdateListener() {
    document.querySelectorAll("td[contenteditable='true']").forEach(cell => {
        cell.addEventListener("input", updateTotals);
    });
}

// Initialize
attachUpdateListener();
updateTotals();

</script>

</body>
</html>
